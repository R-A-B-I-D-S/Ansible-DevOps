#–£–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS-–∑–∞–ø–∏—Å—è–º–∏ —á–µ—Ä–µ–∑ API Porkbun

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π —Å—É–±–¥–æ–º–µ–Ω–æ–≤ 3 —É—Ä–æ–≤–Ω—è —á–µ—Ä–µ–∑ API Porkbun.

#–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
```
root@ansible:/etc/ansible/porkbun-dns# tree
.
‚îú‚îÄ‚îÄ ansible.cfg
‚îú‚îÄ‚îÄ group_vars
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ all
‚îî‚îÄ‚îÄ playbooks
    ‚îú‚îÄ‚îÄ create_record.yml
    ‚îú‚îÄ‚îÄ delete_record.yml
    ‚îú‚îÄ‚îÄ find_record_by_ip.yml
    ‚îú‚îÄ‚îÄ list_records.yml
    ‚îî‚îÄ‚îÄ swap_record.yml
```

ansible.cfg - –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª Ansible (–æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω–≤–µ–Ω—Ç–æ—Ä–∏, —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ SSH, —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ YAML) 
group_vars/all - –≤ –¥–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ —Ö—Ä–∞–Ω—è—Ç—Å—è  –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –∫–æ –≤—Å–µ–º —Ö–æ—Å—Ç–∞–º —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –∏–Ω–≤–µ–Ω—Ç–æ—Ä–∏
playboos/list_records.yml - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö —Å—É–±–¥–æ–º–µ–Ω–æ–≤
playbooks/create_record.yml - —Å–æ–∑–¥–∞–Ω–∏–µ –ê-–∑–∞–ø–∏—Å–∏ –¥–ª—è —Å—É–±–¥–æ–º–µ–Ω–∞
playbooks/delete_record.yml - —É–¥–∞–ª–µ–Ω–∏–µ –ê-–∑–∞–ø–∏—Å–∏ –¥–ª—è —Å—É–±–¥–æ–º–µ–Ω–∞
playbooks/find_record_by_ip.yml = –ø–æ–∏—Å–∫ –ê-–∑–∞–ø–∏—Å–∏ –ø–æ ip –∞–¥—Ä–µ—Å—É
playbooks/swap_record.yml -–º–µ–Ω—è–µ—Ç ip –∞–¥—Ä–µ—Å –ê-–∑–∞–ø–∏—Å–∏  —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å—É–±–¥–æ–º–µ–Ω–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –ª–∏—Å—Ç

###–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∏—Ö –ø–ª–µ–π–±—É–∫–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞  

###–°–ø–∏—Å–æ–∫ —Å—É–±–¥–æ–º–µ–Ω–æ–≤
```
root@ansible:/etc/ansible/porkbun-dns# ansible-playbook playbooks/list_records.yml
PLAY [üìã –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ A-–∑–∞–ø–∏—Å–∏ –¥–æ–º–µ–Ω–∞] ***********************************************************************************

TASK [üîç –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ DNS-–∑–∞–ø–∏—Å–∏ –∏–∑ Porkbun] *****************************************************************************
ok: [localhost]

TASK [‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É] ***************************************************************************************
skipping: [localhost]

TASK [üß© –ò–∑–≤–ª–µ—á—å –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å A-–∑–∞–ø–∏—Å–∏] *******************************************************************************
ok: [localhost]

TASK [üìÑ –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö A-–∑–∞–ø–∏—Å–µ–π] **********************************************************************************
ok: [localhost] =>
  msg: |-
    –°–ü–ò–°–û–ö A-–ó–ê–ü–ò–°–ï–ô –î–õ–Ø testbot.org

     1) my-project.testbot.org     ‚Üí 192.16.1.1
     2) my-test.testbot.org        ‚Üí 3.3.3.3


TASK [üü° –ù–µ—Ç A-–∑–∞–ø–∏—Å–µ–π] **************************************************************************************************
skipping: [localhost]

PLAY RECAP ***************************************************************************************************************
localhost                  : ok=3    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0
```

–°–æ–∑–¥–∞–Ω–∏–µ —Å—É–±–¥–æ–º–µ–Ω–∞
```
root@ansible:/etc/ansible/porkbun-dns# ansible-playbook playbooks/create_record.yml
–ò–º—è —Å—É–±–¥–æ–º–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, demo): vpn-domen
IP-–∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.1.1.1): 5.5.5.5

PLAY [‚ûï –°–æ–∑–¥–∞—Ç—å A-–∑–∞–ø–∏—Å—å –¥–ª—è —Å—É–±–¥–æ–º–µ–Ω–∞] *********************************************************************************

TASK [üöÄ –°–æ–∑–¥–∞—Ç—å A-–∑–∞–ø–∏—Å—å] ***********************************************************************************************
ok: [localhost]

TASK [‚úÖ –û—Ç—á—ë—Ç] **********************************************************************************************************
ok: [localhost] =>
  msg: '‚úÖ –°–æ–∑–¥–∞–Ω–∞: vpn-domen.testbot.org ‚Üí 5.5.5.5'

PLAY RECAP ***************************************************************************************************************
localhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```

###–ü—Ä–æ–≤–µ—Ä–∫–∞
```
root@ansible:/etc/ansible/porkbun-dns# ansible-playbook playbooks/list_records.yml
PLAY [üìã –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ A-–∑–∞–ø–∏—Å–∏ –¥–æ–º–µ–Ω–∞] ***********************************************************************************

TASK [üîç –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ DNS-–∑–∞–ø–∏—Å–∏ –∏–∑ Porkbun] *****************************************************************************
ok: [localhost]

TASK [‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É] ***************************************************************************************
skipping: [localhost]

TASK [üß© –ò–∑–≤–ª–µ—á—å –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å A-–∑–∞–ø–∏—Å–∏] *******************************************************************************
ok: [localhost]

TASK [üìÑ –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö A-–∑–∞–ø–∏—Å–µ–π] **********************************************************************************
ok: [localhost] =>
  msg: |-
    –°–ü–ò–°–û–ö A-–ó–ê–ü–ò–°–ï–ô –î–õ–Ø testbot.org
     1) my-project.testbot.org     ‚Üí 192.16.1.1
     2) my-test.testbot.org        ‚Üí 3.3.3.3
     3) vpn-domen.testbot.org      ‚Üí 5.5.5.5
```

###–£–¥–∞–ª–µ–Ω–∏–µ –ê-–∑–∞–ø–∏—Å–∏ —Å—É–±–¥–æ–º–µ–Ω–∞
```
root@ansible:/etc/ansible/porkbun-dns# ansible-playbook playbooks/delete_record.yml

–ò–º—è —Å—É–±–¥–æ–º–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, demo –∏–ª–∏ blog): my-test
IP-–∞–¥—Ä–µ—Å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.1.1.1): 3.3.3.3

PLAY [‚ùå –£–¥–∞–ª–∏—Ç—å A-–∑–∞–ø–∏—Å—å –ø–æ —Å—É–±–¥–æ–º–µ–Ω—É –∏ IP] *****************************************************************************

TASK [üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö] ********************************************************************************************
ok: [localhost] =>
  msg: |-
    Domain: testbot.org
    Subdomain: my-test
    Target IP: 3.3.3.3

TASK [üîç –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ DNS-–∑–∞–ø–∏—Å–∏ –∏–∑ Porkbun] *****************************************************************************
ok: [localhost]

TASK [‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É] ***************************************************************************************
skipping: [localhost]

TASK [üß© –ù–∞–π—Ç–∏ A-–∑–∞–ø–∏—Å—å —Å –∏–º–µ–Ω–µ–º my-test –∏ IP 3.3.3.3] *******************************************************************

TASK [üö´ –ù–µ—Ç —Å–æ–≤–ø–∞–¥–∞—é—â–µ–π A-–∑–∞–ø–∏—Å–∏] ***************************************************************************************
skipping: [localhost]

TASK [üóëÔ∏è –£–¥–∞–ª–∏—Ç—å A-–∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ API] **************************************************************************************
ok: [localhost]

TASK [‚úÖ –û—Ç—á—ë—Ç –æ–± —É–¥–∞–ª–µ–Ω–∏–∏] **********************************************************************************************
ok: [localhost] =>
  msg: ' ‚úÖ –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞ my-test.testbot.org ‚Üí 3.3.3.3 '

PLAY RECAP ***************************************************************************************************************
localhost                  : ok=5    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0
```
###–ü—Ä–æ–≤–µ—Ä–∫–∞
```
root@ansible:/etc/ansible/porkbun-dns# ansible-playbook playbooks/list_records.yml
PLAY [üìã –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ A-–∑–∞–ø–∏—Å–∏ –¥–æ–º–µ–Ω–∞] ***********************************************************************************

TASK [üîç –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ DNS-–∑–∞–ø–∏—Å–∏ –∏–∑ Porkbun] *****************************************************************************
ok: [localhost]

TASK [‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É] ***************************************************************************************
skipping: [localhost]

TASK [üß© –ò–∑–≤–ª–µ—á—å –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å A-–∑–∞–ø–∏—Å–∏] *******************************************************************************
ok: [localhost]

TASK [üìÑ –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö A-–∑–∞–ø–∏—Å–µ–π] **********************************************************************************
ok: [localhost] =>
  msg: |-
    –°–ü–ò–°–û–ö A-–ó–ê–ü–ò–°–ï–ô –î–õ–Ø testbot.org
     1) my-project.testbot.org     ‚Üí 192.16.1.1
     2) vpn-domen.testbot.org      ‚Üí 5.5.5.5
```


